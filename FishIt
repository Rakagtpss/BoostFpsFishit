--[[ 
    GEMINI HUB V3: Karakter & Vehicle Speed
    Fitur: Speed Karakter, Speed Perahu/Mobil, FPS Lock, Walk on Water, No Render
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer

-- --- UI SETUP ---
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")

local SpeedBox = Instance.new("TextBox")
local SpeedButton = Instance.new("TextButton")
local BoatButton = Instance.new("TextButton") -- TOMBOL BARU UNTUK KENDARAAN
local FpsBox = Instance.new("TextBox")
local FpsButton = Instance.new("TextButton")
local WaterButton = Instance.new("TextButton")
local RenderButton = Instance.new("TextButton")

ScreenGui.Name = "RakaGanteng"
ScreenGui.Parent = CoreGui
ScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Size = UDim2.new(0, 220, 0, 420) -- Ukuran ditambah
MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
MainFrame.Active = true
MainFrame.Draggable = true

Title.Parent = MainFrame
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.Font = Enum.Font.GothamBold
Title.Text = "Gemini Hub V3"
Title.TextColor3 = Color3.new(1,1,1)
Title.TextSize = 16

-- Helper Function Create Button
local function createBtn(name, pos, text, color)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Parent = MainFrame
    btn.Position = pos
    btn.Size = UDim2.new(0.8, 0, 0, 30)
    btn.BackgroundColor3 = color or Color3.fromRGB(60, 60, 60)
    btn.Font = Enum.Font.GothamBold
    btn.Text = text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextSize = 12
    return btn
end

local function createBox(name, pos, placeholder)
    local box = Instance.new("TextBox")
    box.Name = name
    box.Parent = MainFrame
    box.Position = pos
    box.Size = UDim2.new(0.8, 0, 0, 30)
    box.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    box.PlaceholderText = placeholder
    box.Text = ""
    box.TextColor3 = Color3.new(1,1,1)
    return box
end

-- Layouting
SpeedBox = createBox("SpeedBox", UDim2.new(0.1, 0, 0.12, 0), "Player Speed")
SpeedButton = createBtn("SpeedBtn", UDim2.new(0.1, 0, 0.20, 0), "Set Player Speed")

BoatButton = createBtn("BoatBtn", UDim2.new(0.1, 0, 0.30, 0), "Boat Speed: OFF", Color3.fromRGB(200, 50, 50))

FpsBox = createBox("FpsBox", UDim2.new(0.1, 0, 0.42, 0), "FPS Cap (e.g 60)")
FpsButton = createBtn("FpsBtn", UDim2.new(0.1, 0, 0.50, 0), "Set FPS Lock")

WaterButton = createBtn("WaterBtn", UDim2.new(0.1, 0, 0.62, 0), "Walk On Water: OFF", Color3.fromRGB(200, 50, 50))
RenderButton = createBtn("RenderBtn", UDim2.new(0.1, 0, 0.75, 0), "Disable 3D: OFF", Color3.fromRGB(200, 50, 50))

-- --- LOGIC ---
local vSpeedEnabled = false
local playerSpeed = 16
local waterEnabled = false
local waterPart = nil

-- 1. Player Speed
SpeedButton.MouseButton1Click:Connect(function()
    playerSpeed = tonumber(SpeedBox.Text) or 16
    SpeedButton.Text = "Speed: " .. playerSpeed
end)

-- 2. Boat Speed (Vehicle Speed)
BoatButton.MouseButton1Click:Connect(function()
    vSpeedEnabled = not vSpeedEnabled
    if vSpeedEnabled then
        BoatButton.Text = "Boat Speed: ON"
        BoatButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
    else
        BoatButton.Text = "Boat Speed: OFF"
        BoatButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    end
end)

-- 3. Loop Utama (Speed & Vehicle)
RunService.Stepped:Connect(function()
    local char = LocalPlayer.Character
    if not char then return end
    
    -- Speed Karakter
    if char:FindFirstChild("Humanoid") then
        char.Humanoid.WalkSpeed = playerSpeed
        
        -- Speed Kendaraan (Boat/Mobil)
        if vSpeedEnabled and char.Humanoid.SeatPart and char.Humanoid.SeatPart:IsA("VehicleSeat") then
            local seat = char.Humanoid.SeatPart
            -- Mengubah MaxSpeed kursi kendaraan
            seat.MaxSpeed = tonumber(SpeedBox.Text) or 100
            -- Memberikan dorongan fisik (Velocity) agar lebih cepat
            seat.AssemblyLinearVelocity = seat.CFrame.LookVector * seat.MaxSpeed
        end
    end
end)

-- 4. Walk On Water (Jesus Mode)
WaterButton.MouseButton1Click:Connect(function()
    waterEnabled = not waterEnabled
    WaterButton.Text = "Walk On Water: " .. (waterEnabled and "ON" or "OFF")
    WaterButton.BackgroundColor3 = waterEnabled and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)
    if not waterEnabled and waterPart then waterPart:Destroy() waterPart = nil end
end)

RunService.Heartbeat:Connect(function()
    if not waterEnabled then return end
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local root = char.HumanoidRootPart
        local params = RaycastParams.new()
        params.FilterDescendantsInstances = {char, waterPart}
        params.IgnoreWater = false
        local res = Workspace:Raycast(root.Position, Vector3.new(0, -15, 0), params)
        
        if res and res.Material == Enum.Material.Water then
            if not waterPart then
                waterPart = Instance.new("Part", Workspace)
                waterPart.Size = Vector3.new(15, 1, 15)
                waterPart.Anchored = true
                waterPart.Transparency = 0.7
                waterPart.BrickColor = BrickColor.new("Cyan")
            end
            waterPart.Position = Vector3.new(root.Position.X, res.Position.Y, root.Position.Z)
        elseif waterPart then
            waterPart.Position = Vector3.new(0, -1000, 0)
        end
    end
end)

-- 5. Lain-lain (FPS & Render)
FpsButton.MouseButton1Click:Connect(function()
    if setfpscap then setfpscap(tonumber(FpsBox.Text) or 60) end
end)

local BlackScreen = Instance.new("Frame", ScreenGui)
BlackScreen.Size = UDim2.new(1,0,1,0)
BlackScreen.BackgroundColor3 = Color3.new(0,0,0)
BlackScreen.Visible = false
BlackScreen.ZIndex = 999

RenderButton.MouseButton1Click:Connect(function()
    local renderOff = not BlackScreen.Visible
    BlackScreen.Visible = renderOff
    RenderButton.Text = "Disable 3D: " .. (renderOff and "ON" or "OFF")
    RenderButton.BackgroundColor3 = renderOff and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)
    pcall(function() RunService:Set3dRenderingEnabled(not renderOff) end)
end)

UserInputService.InputBegan:Connect(function(i)
    if i.KeyCode == Enum.KeyCode.RightControl then MainFrame.Visible = not MainFrame.Visible end
end)

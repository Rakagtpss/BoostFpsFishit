--[[ SERAPHIN HELPER: EVENT SPAWN & PROPS UPDATE ]]--

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")

local Player = Players.LocalPlayer
local Char = Player.Character or Player.CharacterAdded:Wait()
local HRP = Char:WaitForChild("HumanoidRootPart", 5)

-- // Konfigurasi Visual
local UI_CONFIG = {
    Width = 300,
    Height = 280, 
    Color = Color3.fromRGB(12, 12, 14), 
    HeaderColor = Color3.fromRGB(18, 18, 22),
    Accent = Color3.fromRGB(0, 255, 170),
    StatsColor = Color3.fromRGB(10, 10, 12),
    TextColor = Color3.fromRGB(255, 255, 255),
    Font = Enum.Font.GothamBold
}

if CoreGui:FindFirstChild("SeraphinHelper") then CoreGui.SeraphinHelper:Destroy() end
local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "SeraphinHelper"

-- ====================================================
-- [1] COMPACT FLOATING HUD
-- ====================================================
local FloatHUD = Instance.new("Frame", ScreenGui)
FloatHUD.Size = UDim2.new(0, 180, 0, 95) 
FloatHUD.Position = UDim2.new(0.85, 0, 0.3, 0)
FloatHUD.BackgroundColor3 = UI_CONFIG.StatsColor
FloatHUD.Active = true
FloatHUD.Draggable = true 
Instance.new("UICorner", FloatHUD).CornerRadius = UDim.new(0, 8)
local HudStroke = Instance.new("UIStroke", FloatHUD)
HudStroke.Color = UI_CONFIG.Accent

local ListLayout = Instance.new("UIListLayout", FloatHUD)
ListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ListLayout.VerticalAlignment = Enum.VerticalAlignment.Center

local function CreateRow(text, isHeader)
    local lbl = Instance.new("TextLabel", FloatHUD)
    lbl.Size = UDim2.new(1, 0, 0, 18)
    lbl.BackgroundTransparency = 1
    lbl.Text = text
    lbl.Font = UI_CONFIG.Font
    lbl.TextColor3 = isHeader and UI_CONFIG.Accent or UI_CONFIG.TextColor
    lbl.TextSize = isHeader and 11 or 10
    lbl.RichText = true
    return lbl
end

CreateRow("SERAPHIN STATS", true)
local LblInv = CreateRow("Fish: Loading...", false)
local LblCaught = CreateRow("Caught: Loading...", false)

-- ====================================================
-- [2] MAIN MENU
-- ====================================================
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, UI_CONFIG.Width, 0, UI_CONFIG.Height)
Main.Position = UDim2.new(0.5, -150, 0.4, 0)
Main.BackgroundColor3 = UI_CONFIG.Color
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main)
local MainStroke = Instance.new("UIStroke", Main)
MainStroke.Color = UI_CONFIG.Accent

local Header = Instance.new("Frame", Main)
Header.Size = UDim2.new(1, 0, 0, 30) 
Header.BackgroundColor3 = UI_CONFIG.HeaderColor
Instance.new("UICorner", Header)

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(0, 120, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Text = "SERAPHIN <font color=\"#00ffaa\">HELPER</font>"
Title.RichText = true
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = UI_CONFIG.Font
Title.TextSize = 12
Title.BackgroundTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Left

local RealTimeFps = Instance.new("TextLabel", Header)
RealTimeFps.Size = UDim2.new(0, 80, 1, 0)
RealTimeFps.Position = UDim2.new(1, -100, 0, 0)
RealTimeFps.BackgroundTransparency = 1
RealTimeFps.TextColor3 = Color3.fromRGB(150, 255, 150)
RealTimeFps.Font = Enum.Font.Code
RealTimeFps.TextSize = 10

local Container = Instance.new("Frame", Main)
Container.Size = UDim2.new(1, -10, 1, -40)
Container.Position = UDim2.new(0, 5, 0, 35)
Container.BackgroundTransparency = 1

local Grid = Instance.new("UIGridLayout", Container)
Grid.CellSize = UDim2.new(0, 135, 0, 24) 
Grid.CellPadding = UDim2.new(0, 5, 0, 5)
Grid.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function MakeBtn(text)
    local b = Instance.new("TextButton", Container)
    b.Text = text
    b.BackgroundColor3 = Color3.fromRGB(20, 20, 24)
    b.TextColor3 = Color3.fromRGB(220, 220, 220)
    b.Font = UI_CONFIG.Font 
    b.TextSize = 10 
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 4) 
    Instance.new("UIStroke", b).Color = Color3.fromRGB(50, 50, 55)
    return b
end

local function ToggleVisual(btn, on)
    btn.BackgroundColor3 = on and UI_CONFIG.Accent or Color3.fromRGB(20, 20, 24)
    btn.TextColor3 = on and Color3.new(0,0,0) or Color3.fromRGB(220, 220, 220)
end

-- // State & Logic
local States = {Freeze=false, WoW=false, Boost=false, AutoEvent=false}
local BodyV = nil

local BtnFreeze = MakeBtn("Freeze Player")
local BtnWow = MakeBtn("Walk On Water")
local BtnEvent = MakeBtn("Auto Event: OFF") 
local BtnBoost = MakeBtn("Booster Mode")
local BtnFps = MakeBtn("FPS Cap: Unlimited")
local BtnSave = MakeBtn("Save Position")
local BtnLoad = MakeBtn("Teleport Saved")
local BtnRejoin = MakeBtn("Rejoin Server")

-- 1. FPS Monitor
RunService.RenderStepped:Connect(function(dt)
    RealTimeFps.Text = "FPS: " .. math.floor(1/dt)
end)

-- 2. AUTO EVENT LOGIC
BtnEvent.MouseButton1Click:Connect(function()
    States.AutoEvent = not States.AutoEvent
    BtnEvent.Text = "Auto Event: " .. (States.AutoEvent and "ON" or "OFF")
    ToggleVisual(BtnEvent, States.AutoEvent)
    
    task.spawn(function()
        while States.AutoEvent do
            pcall(function()
                -- Mencari spawn event di berbagai folder umum
                local paths = {workspace:FindFirstChild("Events"), workspace:FindFirstChild("WorldEvents"), workspace:FindFirstChild("Props")}
                for _, folder in pairs(paths) do
                    if folder then
                        for _, v in pairs(folder:GetDescendants()) do
                            if v.Name:find("Spawn") or v.Name:find("Event") then
                                if v:IsA("BasePart") then
                                    HRP.CFrame = v.CFrame + Vector3.new(0, 5, 0)
                                    break
                                end
                            end
                        end
                    end
                end
            end)
            task.wait(3) -- Interval pengecekan cepat
        end
    end)
end)

-- 3. WALK ON WATER (INCL. PROPS)
BtnWow.MouseButton1Click:Connect(function()
    States.WoW = not States.WoW
    ToggleVisual(BtnWow, States.WoW)
    if States.WoW then
        BodyV = Instance.new("BodyVelocity", HRP)
        BodyV.MaxForce = Vector3.new(0, 1e6, 0)
        BodyV.Velocity = Vector3.zero
        
        _G.WoWLoop = RunService.Heartbeat:Connect(function()
            -- Menjaga posisi Y tetap stabil di atas permukaan
            HRP.AssemblyLinearVelocity = Vector3.new(HRP.AssemblyLinearVelocity.X, 0, HRP.AssemblyLinearVelocity.Z)
        end)
    else
        if BodyV then BodyV:Destroy() end
        if _G.WoWLoop then _G.WoWLoop:Disconnect() end
    end
end)

-- 4. BOOSTER MODE (NEW PATHS)
BtnBoost.MouseButton1Click:Connect(function()
    States.Boost = not States.Boost
    ToggleVisual(BtnBoost, States.Boost)
    if States.Boost then
        local function Clean(path)
            if not path then return end
            for _, v in pairs(path:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Beam") or v:IsA("Fire") or v:IsA("Smoke") then
                    v.Enabled = false
                end
            end
        end
        Clean(workspace:FindFirstChild("Props"))
        Clean(workspace:FindFirstChild("Islands"))
        Clean(ReplicatedStorage:FindFirstChild("VFX"))
        Clean(ReplicatedStorage:FindFirstChild("Passives"))
        Clean(ReplicatedStorage:FindFirstChild("NPC"))
        Lighting.GlobalShadows = false
    end
end)

-- Fitur Standar
BtnFreeze.MouseButton1Click:Connect(function() States.Freeze = not States.Freeze; HRP.Anchored = States.Freeze; ToggleVisual(BtnFreeze, States.Freeze) end)
BtnFps.MouseButton1Click:Connect(function() if setfpscap then setfpscap(999) end end)
BtnSave.MouseButton1Click:Connect(function() 
    _G.SavedPos = HRP.CFrame
    StarterGui:SetCore("SendNotification", {Title="SERAPHIN", Text="Posisi Disimpan!", Duration=2})
end)
BtnLoad.MouseButton1Click:Connect(function() if _G.SavedPos then HRP.CFrame = _G.SavedPos end end)
BtnRejoin.MouseButton1Click:Connect(function() TeleportService:Teleport(game.PlaceId, Player) end)

-- Update Stats Loop
task.spawn(function()
    while task.wait(1) do
        pcall(function()
            local ls = Player:FindFirstChild("leaderstats")
            LblCaught.Text = "Caught: " .. (ls and ls:FindFirstChild("Caught") and ls.Caught.Value or "0")
        end)
    end
end)

print(":: SERAPHIN HELPER LOADED ::")


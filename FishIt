--[[ 
    SCRIPT: Walk on Water + No Render + Speed
    Dibuat oleh: Gemini AI
    Cara Pakai: Execute menggunakan Executor (Synapse, Krnl, Fluxus, Delta, dll)
    Toggle UI: Tekan RIGHT CONTROL
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- --- UI SETUP ---
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local SpeedBox = Instance.new("TextBox")
local SpeedButton = Instance.new("TextButton")
local WaterButton = Instance.new("TextButton")
local RenderButton = Instance.new("TextButton")
local MinimizeLabel = Instance.new("TextLabel")

-- Properties UI (Styling Dark Mode)
ScreenGui.Name = "GeminiTool"
ScreenGui.Parent = CoreGui
ScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
MainFrame.Size = UDim2.new(0, 220, 0, 260)
MainFrame.Active = true
MainFrame.Draggable = true -- Bisa digeser

Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Font = Enum.Font.GothamBold
Title.Text = "Gemini Hub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18

-- --- SPEED SECTION ---
SpeedBox.Name = "SpeedBox"
SpeedBox.Parent = MainFrame
SpeedBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SpeedBox.Position = UDim2.new(0.1, 0, 0.2, 0)
SpeedBox.Size = UDim2.new(0.8, 0, 0, 35)
SpeedBox.Font = Enum.Font.Gotham
SpeedBox.PlaceholderText = "Input Speed (e.g 50)"
SpeedBox.Text = ""
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.TextSize = 14

SpeedButton.Name = "SpeedButton"
SpeedButton.Parent = MainFrame
SpeedButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
SpeedButton.Position = UDim2.new(0.1, 0, 0.35, 0)
SpeedButton.Size = UDim2.new(0.8, 0, 0, 35)
SpeedButton.Font = Enum.Font.GothamBold
SpeedButton.Text = "Set Speed"
SpeedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedButton.TextSize = 14

-- --- WALK ON WATER SECTION ---
WaterButton.Name = "WaterButton"
WaterButton.Parent = MainFrame
WaterButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- Merah (Off)
WaterButton.Position = UDim2.new(0.1, 0, 0.55, 0)
WaterButton.Size = UDim2.new(0.8, 0, 0, 35)
WaterButton.Font = Enum.Font.GothamBold
WaterButton.Text = "Walk On Water: OFF"
WaterButton.TextColor3 = Color3.fromRGB(255, 255, 255)
WaterButton.TextSize = 14

-- --- DISABLE RENDER SECTION ---
RenderButton.Name = "RenderButton"
RenderButton.Parent = MainFrame
RenderButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- Merah (Off)
RenderButton.Position = UDim2.new(0.1, 0, 0.75, 0)
RenderButton.Size = UDim2.new(0.8, 0, 0, 35)
RenderButton.Font = Enum.Font.GothamBold
RenderButton.Text = "Disable 3D: OFF"
RenderButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RenderButton.TextSize = 14

MinimizeLabel.Name = "MinLabel"
MinimizeLabel.Parent = MainFrame
MinimizeLabel.BackgroundTransparency = 1
MinimizeLabel.Position = UDim2.new(0, 0, 0.9, 0)
MinimizeLabel.Size = UDim2.new(1, 0, 0, 20)
MinimizeLabel.Font = Enum.Font.Gotham
MinimizeLabel.Text = "Press Right-Ctrl to Toggle UI"
MinimizeLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
MinimizeLabel.TextSize = 10

-- --- BLACK SCREEN OVERLAY ---
local BlackScreen = Instance.new("Frame")
BlackScreen.Parent = ScreenGui
BlackScreen.BackgroundColor3 = Color3.new(0,0,0)
BlackScreen.Size = UDim2.new(1,0,1,0)
BlackScreen.ZIndex = 999999
BlackScreen.Visible = false
local BlackLabel = Instance.new("TextLabel")
BlackLabel.Parent = BlackScreen
BlackLabel.Size = UDim2.new(1,0,1,0)
BlackLabel.BackgroundTransparency = 1
BlackLabel.TextColor3 = Color3.new(1,1,1)
BlackLabel.Text = "3D Render Disabled (Saving Resources)\nClick Button again to Enable"
BlackLabel.TextSize = 24

-- --- LOGIC VARIABLES ---
local speedEnabled = false
local targetSpeed = 16
local waterEnabled = false
local renderDisabled = false
local waterPart = nil

-- --- FUNCTIONS ---

-- 1. SPEED LOGIC
SpeedButton.MouseButton1Click:Connect(function()
    local num = tonumber(SpeedBox.Text)
    if num then
        targetSpeed = num
        speedEnabled = true
        SpeedButton.Text = "Speed Set to " .. num
        SpeedButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        
        -- Apply langsung
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = targetSpeed
        end
    else
        SpeedButton.Text = "Invalid Number"
        task.wait(1)
        SpeedButton.Text = "Set Speed"
    end
end)

-- Loop untuk memaksa speed (agar tidak direset game)
RunService.Stepped:Connect(function()
    if speedEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        if LocalPlayer.Character.Humanoid.WalkSpeed ~= targetSpeed then
            LocalPlayer.Character.Humanoid.WalkSpeed = targetSpeed
        end
    end
end)

-- 2. WALK ON WATER LOGIC
WaterButton.MouseButton1Click:Connect(function()
    waterEnabled = not waterEnabled
    if waterEnabled then
        WaterButton.Text = "Walk On Water: ON"
        WaterButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
    else
        WaterButton.Text = "Walk On Water: OFF"
        WaterButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        if waterPart then waterPart:Destroy() waterPart = nil end
    end
end)

RunService.Heartbeat:Connect(function()
    if not waterEnabled then return end
    
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    
    local root = char.HumanoidRootPart
    
    -- Cek apakah ada air di bawah
    local rayOrigin = root.Position
    local rayDirection = Vector3.new(0, -15, 0)
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {char, waterPart}
    raycastParams.FilterType = Enum.RaycastFilterType.Exclude
    raycastParams.IgnoreWater = false -- Deteksi air
    
    local rayResult = Workspace:Raycast(rayOrigin, rayDirection, raycastParams)
    
    if rayResult and rayResult.Material == Enum.Material.Water then
        -- Jika belum ada part, buat part
        if not waterPart then
            waterPart = Instance.new("Part")
            waterPart.Name = "JesusPart"
            waterPart.Size = Vector3.new(10, 1, 10)
            waterPart.Transparency = 0.5
            waterPart.Anchored = true
            waterPart.CanCollide = true
            waterPart.BrickColor = BrickColor.new("Cyan")
            waterPart.Parent = Workspace
        end
        
        -- Posisikan part tepat di bawah kaki, tapi setinggi air
        -- Mengambil posisi Y air agak tricky, kita kunci di posisi impact raycast
        waterPart.Position = Vector3.new(root.Position.X, rayResult.Position.Y, root.Position.Z)
        waterPart.Velocity = Vector3.new(0,0,0)
    else
        -- Jika tidak di atas air, sembunyikan partnya
        if waterPart then
            waterPart.Position = Vector3.new(0, -1000, 0)
        end
    end
end)

-- 3. DISABLE 3D RENDER LOGIC
RenderButton.MouseButton1Click:Connect(function()
    renderDisabled = not renderDisabled
    
    if renderDisabled then
        RenderButton.Text = "Disable 3D: ON"
        RenderButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        
        BlackScreen.Visible = true
        
        -- Coba matikan 3D rendering (Executor dependent)
        pcall(function()
            RunService:Set3dRenderingEnabled(false)
        end)
    else
        RenderButton.Text = "Disable 3D: OFF"
        RenderButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        
        BlackScreen.Visible = false
        
        -- Nyalakan kembali 3D rendering
        pcall(function()
            RunService:Set3dRenderingEnabled(true)
        end)
    end
end)

-- 4. TOGGLE UI (Right Control)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.RightControl then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Notifikasi Awal
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Gemini Hub Loaded";
    Text = "Press Right-Ctrl to Toggle UI";
    Duration = 5;
})

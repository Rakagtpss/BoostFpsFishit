--[[ 
 Walk On Water - Fish It FINAL
 NO PLATFORM / NO MELAYANG
 Mini UI + Toggle
 + NO RENDER 3D (BLACK SCREEN)
]]

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

local Player = Players.LocalPlayer
local Char = Player.Character or Player.CharacterAdded:Wait()
local HRP = Char:WaitForChild("HumanoidRootPart")
local Humanoid = Char:WaitForChild("Humanoid")
local Camera = workspace.CurrentCamera

-- State
local Enabled = false
local BV
local Conn
local BlackGui

-- ================= UI =================
local Gui = Instance.new("ScreenGui", game.CoreGui)
Gui.Name = "FishIt_WOW_FINAL"

local Frame = Instance.new("Frame", Gui)
Frame.Size = UDim2.new(0,130,0,55)
Frame.Position = UDim2.new(0.5,-65,0.75,0)
Frame.BackgroundColor3 = Color3.fromRGB(18,18,18)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,12)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1,0,0,22)
Title.BackgroundTransparency = 1
Title.Text = "Walk On Water"
Title.TextColor3 = Color3.fromRGB(0,170,255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 12

local Btn = Instance.new("TextButton", Frame)
Btn.Size = UDim2.new(0.8,0,0,24)
Btn.Position = UDim2.new(0.1,0,0.45,0)
Btn.Text = "OFF"
Btn.Font = Enum.Font.GothamBold
Btn.TextSize = 12
Btn.TextColor3 = Color3.new(1,1,1)
Btn.BackgroundColor3 = Color3.fromRGB(170,0,0)
Btn.BorderSizePixel = 0
Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,10)

-- ================= NO RENDER =================
local function EnableNoRender()
    if BlackGui then return end

    BlackGui = Instance.new("ScreenGui", game.CoreGui)
    BlackGui.Name = "NO_RENDER_BLACK"

    local BlackFrame = Instance.new("Frame", BlackGui)
    BlackFrame.Size = UDim2.new(1,0,1,0)
    BlackFrame.BackgroundColor3 = Color3.new(0,0,0)
    BlackFrame.BorderSizePixel = 0
end

local function DisableNoRender()
    if BlackGui then
        BlackGui:Destroy()
        BlackGui = nil
    end
end

-- ================= CORE =================
local function Enable()
    -- Walk On Water
    BV = Instance.new("BodyVelocity")
    BV.MaxForce = Vector3.new(0, 1e6, 0)
    BV.Velocity = Vector3.zero
    BV.Parent = HRP

    Humanoid:ChangeState(Enum.HumanoidStateType.Running)

    Conn = RunService.Heartbeat:Connect(function()
        if not Enabled or not HRP then return end

        HRP.AssemblyLinearVelocity = Vector3.new(
            HRP.AssemblyLinearVelocity.X,
            0,
            HRP.AssemblyLinearVelocity.Z
        )
    end)

    -- No Render
    EnableNoRender()
end

local function Disable()
    if Conn then Conn:Disconnect() Conn = nil end
    if BV then BV:Destroy() BV = nil end
    DisableNoRender()
end

-- ================= BUTTON =================
Btn.MouseButton1Click:Connect(function()
    Enabled = not Enabled
    if Enabled then
        Btn.Text = "ON"
        Btn.BackgroundColor3 = Color3.fromRGB(0,170,0)
        Enable()
    else
        Btn.Text = "OFF"
        Btn.BackgroundColor3 = Color3.fromRGB(170,0,0)
        Disable()
    end
end)

-- ================= RESPAWN FIX =================
Player.CharacterAdded:Connect(function(c)
    Char = c
    HRP = c:WaitForChild("HumanoidRootPart")
    Humanoid = c:WaitForChild("Humanoid")
end)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local VirtualUser = game:GetService("VirtualUser")

-- // Function Helper
local fireproximityprompt = fireproximityprompt or function(Obj)
    if Obj:IsA("ProximityPrompt") then
        Obj:InputHoldBegin()
        task.wait(Obj.HoldDuration)
        Obj:InputHoldEnd()
    end
end

local Player = Players.LocalPlayer
local Char = Player.Character or Player.CharacterAdded:Wait()
local HRP = Char:WaitForChild("HumanoidRootPart")
local SelectedItem = ""

-- // Toggles State
local Toggles = {
    AutoPrompt = false, 
    AutoYes = false, 
    AutoEquip = false,
    Booster = false, 
    WoW = false, 
    NoRender = false, 
    Minimized = false
}

local BV, Conn

-- // UI Cleanup
if CoreGui:FindFirstChild("SeraphinWideV13") then CoreGui.SeraphinWideV13:Destroy() end

local Gui = Instance.new("ScreenGui", CoreGui)
Gui.Name = "SeraphinWideV13"

local Main = Instance.new("Frame", Gui)
Main.Size = UDim2.new(0, 450, 0, 400) -- Ukuran Wide
Main.Position = UDim2.new(0.5, -225, 0.3, 0)
Main.BackgroundColor3 = Color3.fromRGB(12, 12, 14)
Main.BorderSizePixel = 0
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 8)

-- Header
local Header = Instance.new("Frame", Main)
Header.Size = UDim2.new(1, 0, 0, 35)
Header.BackgroundColor3 = Color3.fromRGB(20, 20, 22)
Instance.new("UICorner", Header)

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.Text = "SERAPHIN <font color=\"rgb(0,255,170)\">MANAGER</font> V13"
Title.RichText = true
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.BackgroundTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Left

local MinBtn = Instance.new("TextButton", Header)
MinBtn.Size = UDim2.new(0, 50, 0, 22)
MinBtn.Position = UDim2.new(1, -55, 0.5, -11)
MinBtn.Text = "HIDE"
MinBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 38)
MinBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", MinBtn)

local Scroll = Instance.new("ScrollingFrame", Main)
Scroll.Size = UDim2.new(1, -20, 1, -75)
Scroll.Position = UDim2.new(0, 10, 0, 45)
Scroll.BackgroundTransparency = 1
Scroll.ScrollBarThickness = 3
Scroll.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 170)
Scroll.CanvasSize = UDim2.new(0, 0, 0, 550)

local Layout = Instance.new("UIListLayout", Scroll)
Layout.Padding = UDim.new(0, 8)
Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Helper: Button Creator
local function AddBtn(text, callback)
    local b = Instance.new("TextButton", Scroll)
    b.Size = UDim2.new(0.95, 0, 0, 35)
    b.Text = text
    b.BackgroundColor3 = Color3.fromRGB(25, 25, 28)
    b.TextColor3 = Color3.fromRGB(220, 220, 220)
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 12
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)
    b.MouseButton1Click:Connect(function() callback(b) end)
    return b
end

-- --- 1. SCANNER & SELECTION ---
local ListFrame = Instance.new("ScrollingFrame", Scroll)
ListFrame.Size = UDim2.new(0.95, 0, 0, 80)
ListFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 20)
Instance.new("UIListLayout", ListFrame)

local SelDisp = Instance.new("TextLabel", Scroll)
SelDisp.Size = UDim2.new(0.95, 0, 0, 20)
SelDisp.Text = "Pilih item untuk Auto Equip/Sell"; SelDisp.TextColor3 = Color3.fromRGB(0, 255, 170); SelDisp.BackgroundTransparency = 1; SelDisp.TextSize = 11

AddBtn("SCAN GEARS COLLECTION", function()
    for _, c in pairs(ListFrame:GetChildren()) do if c:IsA("TextButton") then c:Destroy() end end
    local p = ReplicatedStorage:FindFirstChild("Modules")
    p = p and p:FindFirstChild("ModelDownloader")
    p = p and p:FindFirstChild("Collection")
    p = p and p:FindFirstChild("Gears")
    if p then
        for _, gear in pairs(p:GetChildren()) do
            local g = Instance.new("TextButton", ListFrame)
            g.Size = UDim2.new(1, 0, 0, 20); g.Text = "  "..gear.Name; g.BackgroundColor3 = Color3.fromRGB(30,30,35); g.TextColor3 = Color3.new(1,1,1); g.TextSize = 10; g.TextXAlignment = "Left"
            g.MouseButton1Click:Connect(function() SelectedItem = gear.Name; SelDisp.Text = "Target: "..gear.Name end)
        end
    end
end)

-- --- 2. MAIN AUTOMATION ---

AddBtn("AUTO EQUIP ITEM: OFF", function(b)
    Toggles.AutoEquip = not Toggles.AutoEquip
    b.Text = Toggles.AutoEquip and "AUTO EQUIP: ON" or "AUTO EQUIP ITEM: OFF"
    b.TextColor3 = Toggles.AutoEquip and Color3.fromRGB(0, 255, 170) or Color3.fromRGB(220, 220, 220)
    task.spawn(function()
        while Toggles.AutoEquip do
            if SelectedItem ~= "" then
                pcall(function()
                    local remote = ReplicatedStorage.Packages._Index["sleitnick_net@0.2.0"].net["RE/EquipItem"]
                    remote:FireServer(SelectedItem)
                end)
            end
            task.wait(0.5)
        end
    end)
end)

AddBtn("AUTO SELL PROMPT: OFF", function(b)
    Toggles.AutoPrompt = not Toggles.AutoPrompt
    b.Text = Toggles.AutoPrompt and "AUTO SELL PROMPT: ON" or "AUTO SELL PROMPT: OFF"
    b.TextColor3 = Toggles.AutoPrompt and Color3.fromRGB(0, 255, 170) or Color3.fromRGB(220, 220, 220)
    task.spawn(function()
        while Toggles.AutoPrompt do
            pcall(function()
                fireproximityprompt(workspace["!!! DEPENDENCIES"]:GetChildren()[4].SellPrompt.SellPrompt)
            end)
            task.wait(0.3)
        end
    end)
end)

AddBtn("AUTO YES CLICKER: OFF", function(b)
    Toggles.AutoYes = not Toggles.AutoYes
    b.Text = Toggles.AutoYes and "AUTO YES CLICKER: ON" or "AUTO YES CLICKER: OFF"
    b.TextColor3 = Toggles.AutoYes and Color3.fromRGB(0, 255, 170) or Color3.fromRGB(220, 220, 220)
    task.spawn(function()
        while Toggles.AutoYes do
            pcall(function()
                for _, v in pairs(Player.PlayerGui:GetDescendants()) do
                    if v:IsA("TextButton") and v.Text:lower() == "yes" and v.Visible then v:Activate() end
                end
            end)
            task.wait(0.3)
        end
    end)
end)

-- --- 3. UTILITIES ---
AddBtn("WALK ON WATER: OFF", function(b)
    Toggles.WoW = not Toggles.WoW
    b.Text = Toggles.WoW and "WALK ON WATER: ON" or "WALK ON WATER: OFF"
    if Toggles.WoW then
        BV = Instance.new("BodyVelocity", HRP); BV.MaxForce = Vector3.new(0, 1e6, 0); BV.Velocity = Vector3.zero
        Conn = RunService.Heartbeat:Connect(function() HRP.AssemblyLinearVelocity = Vector3.new(HRP.AssemblyLinearVelocity.X, 0, HRP.AssemblyLinearVelocity.Z) end)
    else
        if Conn then Conn:Disconnect() end if BV then BV:Destroy() end
    end
end)

AddBtn("BOOSTER MODE (Plastic)", function()
    Lighting.GlobalShadows = false
    for _, v in pairs(game:GetDescendants()) do
        if v:IsA("BasePart") then v.Material = "SmoothPlastic" elseif v:IsA("Texture") or v:IsA("Decal") then v.Transparency = 1 end
    end
end)

AddBtn("NO RENDER 3D: OFF", function(b)
    Toggles.NoRender = not Toggles.NoRender
    RunService:Set3dRenderingEnabled(not Toggles.NoRender)
    b.Text = Toggles.NoRender and "NO RENDER 3D: ON" or "NO RENDER 3D: OFF"
end)

-- Footer & Anti-AFK
local Footer = Instance.new("TextLabel", Main)
Footer.Size = UDim2.new(1, 0, 0, 25); Footer.Position = UDim2.new(0, 0, 1, -25); Footer.BackgroundTransparency = 1; Footer.TextColor3 = Color3.new(0.4,0.4,0.4); Footer.Text = "FPS: -- | Anti-AFK Ready"; Footer.Font = Enum.Font.Code; Footer.TextSize = 10

RunService.RenderStepped:Connect(function()
    Footer.Text = "FPS: "..math.floor(1/RunService.RenderStepped:Wait()).." | Anti-AFK Ready"
end)

Player.Idled:Connect(function() VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame); task.wait(1); VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame) end)

MinBtn.MouseButton1Click:Connect(function()
    Toggles.Minimized = not Toggles.Minimized
    Main:TweenSize(Toggles.Minimized and UDim2.new(0, 450, 0, 35) or UDim2.new(0, 450, 0, 400), "Out", "Quart", 0.3, true)
    Scroll.Visible = not Toggles.Minimized; Footer.Visible = not Toggles.Minimized
    MinBtn.Text = Toggles.Minimized and "SHOW" or "HIDE"
end)

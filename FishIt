-- // SERAPHIN HELPER - HEADER STATS EDITION // --
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")
local Stats = game:GetService("Stats")

local Player = Players.LocalPlayer

-- // State & Settings
local Optimized, Minimized = false, false
local fpsLimits = {15, 30, 60, 90, 180, 999}
local currentLimitIndex = 6
local BV, WowConn

-- // UI Config
local UI_WIDTH, UI_HEIGHT = 360, 180 -- Sedikit diperlebar untuk stats di atas
local ACCENT = Color3.fromRGB(0, 255, 170)
local BG_MAIN = Color3.fromRGB(10, 10, 12)

-- // ANTI-AFK & AUTO RECONNECT
task.spawn(function()
    local VirtualUser = game:GetService("VirtualUser")
    Player.Idled:Connect(function() VirtualUser:CaptureController() VirtualUser:ClickButton2(Vector2.new()) end)
end)

game:GetService("GuiService").ErrorMessageChanged:Connect(function()
    task.wait(5) TeleportService:Teleport(game.PlaceId, Player)
end)

-- // NOTIFIKASI LOAD
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Seraphin Helper",
    Text = "Script Berhasil Terload! v2026",
    Duration = 5
})

-- // Cleanup Old UI
if CoreGui:FindFirstChild("SeraphinHelper") then CoreGui.SeraphinHelper:Destroy() end

-- // UI SETUP
local Gui = Instance.new("ScreenGui", CoreGui)
Gui.Name = "SeraphinHelper"

local MainFrame = Instance.new("Frame", Gui)
MainFrame.Size = UDim2.new(0, UI_WIDTH, 0, UI_HEIGHT)
MainFrame.Position = UDim2.new(0.5, -UI_WIDTH/2, 0.4, 0)
MainFrame.BackgroundColor3 = BG_MAIN
MainFrame.BackgroundTransparency = 0.2
MainFrame.Active, MainFrame.Draggable = true, true
Instance.new("UICorner", MainFrame)

-- Judul Utama
local Title = Instance.new("TextLabel", MainFrame)
Title.Size, Title.Position = UDim2.new(0, 130, 0, 35), UDim2.new(0, 15, 0, 0)
Title.Text = "SERAPHIN <font color=\"rgb(0,255,170)\">HELPER</font>"
Title.RichText, Title.TextColor3, Title.Font, Title.TextSize = true, Color3.new(1,1,1), Enum.Font.GothamBold, 13
Title.BackgroundTransparency, Title.TextXAlignment = 1, 0

-- Indikator FPS & PING (Samping Judul)
local HeaderStats = Instance.new("TextLabel", MainFrame)
HeaderStats.Size, HeaderStats.Position = UDim2.new(0, 140, 0, 35), UDim2.new(0, 145, 0, 0)
HeaderStats.Text = "[ FPS: -- | PING: -- ]"
HeaderStats.TextColor3 = ACCENT
HeaderStats.Font = Enum.Font.Code
HeaderStats.TextSize = 10
HeaderStats.BackgroundTransparency, HeaderStats.TextXAlignment = 1, 0

-- Tombol Hide
local MinBtn = Instance.new("TextButton", MainFrame)
MinBtn.Size = UDim2.new(0, 50, 0, 20)
MinBtn.Position = UDim2.new(1, -60, 0, 8)
MinBtn.Text = "HIDE"
MinBtn.TextColor3 = Color3.new(1, 1, 1)
MinBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 9
Instance.new("UICorner", MinBtn)

local Scroll = Instance.new("ScrollingFrame", MainFrame)
Scroll.Size, Scroll.Position = UDim2.new(1, -20, 1, -50), UDim2.new(0, 10, 0, 40)
Scroll.BackgroundTransparency, Scroll.BorderSizePixel, Scroll.CanvasSize = 1, 0, UDim2.new(0,0,0,0)
Scroll.ScrollBarThickness = 0
local Layout = Instance.new("UIGridLayout", Scroll)
Layout.CellSize, Layout.CellPadding = UDim2.new(0.5, -7, 0, 35), UDim2.new(0, 10, 0, 8)

local function CreateButton(text)
    local btn = Instance.new("TextButton", Scroll)
    btn.Text, btn.Font, btn.TextSize = text, Enum.Font.GothamBold, 10
    btn.TextColor3, btn.BackgroundColor3, btn.BackgroundTransparency = Color3.new(0.9,0.9,0.9), Color3.fromRGB(25,25,30), 0.3
    Instance.new("UICorner", btn)
    return btn
end

-- // FITUR
local PotBtn = CreateButton("BOOSTER: OFF")
local NetBtn = CreateButton("NET BOOST: OFF")
local FpsBtn = CreateButton("FPS: UNLIMITED")
local RedBtn = CreateButton("NO RENDER: OFF")
local WowBtn = CreateButton("WATER WALK: OFF")
local FrzBtn = CreateButton("FREEZE: OFF")

-- // LOGIC FUNCTIONS

-- Hide/Show Logic
MinBtn.MouseButton1Click:Connect(function()
    Minimized = not Minimized
    if Minimized then
        MainFrame:TweenSize(UDim2.new(0, UI_WIDTH, 0, 35), "Out", "Quad", 0.3, true)
        Scroll.Visible = false
        MinBtn.Text = "SHOW"
    else
        MainFrame:TweenSize(UDim2.new(0, UI_WIDTH, 0, UI_HEIGHT), "Out", "Quad", 0.3, true)
        Scroll.Visible = true
        MinBtn.Text = "HIDE"
    end
end)

-- Booster
PotBtn.MouseButton1Click:Connect(function()
    Optimized = not Optimized
    PotBtn.Text = Optimized and "BOOSTER: ON" or "BOOSTER: OFF"
    settings().Rendering.QualityLevel = Optimized and 1 or 10
    Lighting.GlobalShadows = not Optimized
    for _, v in pairs(game:GetDescendants()) do
        if Optimized and v:IsA("BasePart") then v.Material, v.CastShadow = Enum.Material.SmoothPlastic, false end
    end
end)

-- No Render
RedBtn.MouseButton1Click:Connect(function()
    local isEnabled = RunService:Get3dRenderingEnabled()
    RunService:Set3dRenderingEnabled(not isEnabled)
    RedBtn.Text = isEnabled and "NO RENDER: ON" or "NO RENDER: OFF"
end)

-- Water Walk
WowBtn.MouseButton1Click:Connect(function()
    local Char = Player.Character
    local HRP = Char and Char:FindFirstChild("HumanoidRootPart")
    if not HRP then return end
    _G.WowActive = not _G.WowActive
    WowBtn.Text = _G.WowActive and "W-WALK: ON" or "W-WALK: OFF"
    if _G.WowActive then
        BV = Instance.new("BodyVelocity", HRP)
        BV.Name = "SeraphinWow"
        BV.MaxForce = Vector3.new(0, math.huge, 0)
        BV.Velocity = Vector3.zero
        WowConn = RunService.Stepped:Connect(function()
            HRP.Velocity = Vector3.new(HRP.Velocity.X, 0, HRP.Velocity.Z)
        end)
    else
        if WowConn then WowConn:Disconnect() end
        if HRP:FindFirstChild("SeraphinWow") then HRP.SeraphinWow:Destroy() end
    end
end)

-- Freeze
FrzBtn.MouseButton1Click:Connect(function()
    local Char = Player.Character
    local HRP = Char and Char:FindFirstChild("HumanoidRootPart")
    if HRP then
        HRP.Anchored = not HRP.Anchored
        FrzBtn.Text = HRP.Anchored and "FREEZE: ON" or "FREEZE: OFF"
    end
end)

-- FPS Cap
FpsBtn.MouseButton1Click:Connect(function()
    currentLimitIndex = currentLimitIndex % #fpsLimits + 1
    local lim = fpsLimits[currentLimitIndex]
    if setfpscap then setfpscap(lim) end
    FpsBtn.Text = "FPS: "..(lim > 900 and "UNLI" or lim)
end)

-- // HEADER STATS LOOP
local lastT, frames = os.clock(), 0
RunService.RenderStepped:Connect(function()
    frames = frames + 1
    if os.clock() - lastT >= 1 then
        local ping = math.floor(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())
        HeaderStats.Text = "[ FPS: "..frames.." | PING: "..ping.."ms ]"
        frames, lastT = 0, os.clock()
    end
end)

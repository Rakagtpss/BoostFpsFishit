Tentu, ini adalah FULL SCRIPT UI FINAL yang sudah digabungkan dengan semua fitur yang Anda minta:
 * Side UI Layout (Sidebar Kiri + Konten Kanan).
 * Ultimate CPU Booster (Pembersih level ekstrem).
 * Event-Based Logic (0% CPU Usage saat diam).
 * Custom Notification (Garis Cyan + Teks Bold di pojok kanan bawah).
 * Anti-Stuck Slider (0.1s - 60s).
 * Footer Credit (@828_raka).
Silakan salin dan jalankan:
-- [[ SERAPHIN HELPER - ULTIMATE SIDE UI ]] --
-- [[ Optimized by Gemini & @828_raka ]] --

-- [1] Services & Variables
local Services = {
    Players = game:GetService("Players"),
    RunService = game:GetService("RunService"),
    CoreGui = game:GetService("CoreGui"),
    Lighting = game:GetService("Lighting"),
    TeleportService = game:GetService("TeleportService"),
    UserInputService = game:GetService("UserInputService"),
    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    TweenService = game:GetService("TweenService"),
    Workspace = game:GetService("Workspace")
}

local Player = Services.Players.LocalPlayer
local Char = Player.Character or Player.CharacterAdded:Wait()
local HRP = Char:WaitForChild("HumanoidRootPart", 10)
local Hum = Char:WaitForChild("Humanoid", 10)

Player.CharacterAdded:Connect(function(newChar)
    Char = newChar
    HRP = newChar:WaitForChild("HumanoidRootPart", 10)
    Hum = newChar:WaitForChild("Humanoid", 10)
end)

-- // UI CONFIGURATION (Dark Theme + Cyan Accent)
local UI_THEME = {
    MainColor = Color3.fromRGB(18, 18, 18),      -- Hitam Pekat Elegan
    SideColor = Color3.fromRGB(12, 12, 12),      -- Sidebar Lebih Gelap
    Accent = Color3.fromRGB(0, 255, 255),        -- Cyan Neon
    TextWhite = Color3.fromRGB(240, 240, 240),
    TextGray = Color3.fromRGB(150, 150, 150),
    Font = Enum.Font.GothamBold,
    BtnFont = Enum.Font.GothamMedium
}

-- Cleanup Old UI
if Services.CoreGui:FindFirstChild("SeraphinSideUI") then Services.CoreGui.SeraphinSideUI:Destroy() end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SeraphinSideUI"
ScreenGui.Parent = Services.CoreGui
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- ====================================================
-- [CUSTOM NOTIFICATION SYSTEM]
-- ====================================================
local NotifyContainer = Instance.new("Frame", ScreenGui)
NotifyContainer.Name = "NotifyContainer"
NotifyContainer.Size = UDim2.new(0, 250, 1, 0)
NotifyContainer.Position = UDim2.new(1, -260, 0, 0)
NotifyContainer.BackgroundTransparency = 1
NotifyContainer.ClipsDescendants = false

local NotifyLayout = Instance.new("UIListLayout", NotifyContainer)
NotifyLayout.SortOrder = Enum.SortOrder.LayoutOrder
NotifyLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
NotifyLayout.Padding = UDim.new(0, 5)

local function Notify(title, msg)
    -- Frame Utama Notif
    local NFrame = Instance.new("Frame", NotifyContainer)
    NFrame.Size = UDim2.new(1, 0, 0, 50)
    NFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    NFrame.BackgroundTransparency = 0.1
    NFrame.BorderSizePixel = 0
    NFrame.Position = UDim2.new(1, 260, 0, 0) -- Mulai dari luar layar (untuk animasi)
    
    -- Garis Cyan di Pinggir (Accent Bar)
    local AccentBar = Instance.new("Frame", NFrame)
    AccentBar.Size = UDim2.new(0, 3, 1, 0)
    AccentBar.Position = UDim2.new(0, 0, 0, 0)
    AccentBar.BackgroundColor3 = UI_THEME.Accent
    AccentBar.BorderSizePixel = 0
    
    -- Rounded Corner (Kanan saja)
    local UIC = Instance.new("UICorner", NFrame)
    UIC.CornerRadius = UDim.new(0, 4)

    -- Title (BOLD CYAN)
    local LblTitle = Instance.new("TextLabel", NFrame)
    LblTitle.Size = UDim2.new(1, -15, 0, 20)
    LblTitle.Position = UDim2.new(0, 10, 0, 5)
    LblTitle.BackgroundTransparency = 1
    LblTitle.Text = title
    LblTitle.TextColor3 = UI_THEME.Accent
    LblTitle.Font = Enum.Font.GothamBlack -- Lebih tebal
    LblTitle.TextSize = 12
    LblTitle.TextXAlignment = Enum.TextXAlignment.Left

    -- Message (SEMI BOLD WHITE)
    local LblMsg = Instance.new("TextLabel", NFrame)
    LblMsg.Size = UDim2.new(1, -15, 0, 20)
    LblMsg.Position = UDim2.new(0, 10, 0, 22)
    LblMsg.BackgroundTransparency = 1
    LblMsg.Text = msg
    LblMsg.TextColor3 = UI_THEME.TextWhite
    LblMsg.Font = Enum.Font.GothamBold -- Bold
    LblMsg.TextSize = 10
    LblMsg.TextXAlignment = Enum.TextXAlignment.Left
    LblMsg.TextWrapped = true

    -- Animasi Masuk
    Services.TweenService:Create(NFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {BackgroundTransparency = 0.2}):Play()
    
    -- Auto Destroy
    task.spawn(function()
        task.wait(3.5) -- Durasi tampil
        Services.TweenService:Create(NFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {BackgroundTransparency = 1}):Play()
        Services.TweenService:Create(LblTitle, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        Services.TweenService:Create(LblMsg, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        Services.TweenService:Create(AccentBar, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
        task.wait(0.5)
        NFrame:Destroy()
    end)
end

-- Notif Awal
Notify("SYSTEM", "Seraphin Ultimate Loaded!")

-- ====================================================
-- [UI CONSTRUCTION - MAIN FRAME]
-- ====================================================

-- Main Frame (Wadah Utama)
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 420, 0, 270)
MainFrame.Position = UDim2.new(0, 30, 0.35, 0)
MainFrame.BackgroundColor3 = UI_THEME.MainColor
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true

Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 8)
local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Color = UI_THEME.Accent
MainStroke.Thickness = 1.2
MainStroke.Transparency = 0.3

-- Sidebar (Kiri)
local Sidebar = Instance.new("Frame", MainFrame)
Sidebar.Name = "Sidebar"
Sidebar.Size = UDim2.new(0, 100, 1, 0)
Sidebar.BackgroundColor3 = UI_THEME.SideColor
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 8)

local Line = Instance.new("Frame", Sidebar)
Line.Size = UDim2.new(0, 1, 1, 0)
Line.Position = UDim2.new(1, -1, 0, 0)
Line.BackgroundColor3 = UI_THEME.Accent
Line.BackgroundTransparency = 0.8
Line.BorderSizePixel = 0

-- Content Area (Kanan)
local Content = Instance.new("Frame", MainFrame)
Content.Name = "Content"
Content.Size = UDim2.new(1, -110, 1, -25)
Content.Position = UDim2.new(0, 110, 0, 10)
Content.BackgroundTransparency = 1

-- Footer Text (@828_raka)
local Footer = Instance.new("TextLabel", MainFrame)
Footer.Text = "@828_raka"
Footer.Size = UDim2.new(0, 100, 0, 20)
Footer.Position = UDim2.new(1, -105, 1, -20)
Footer.BackgroundTransparency = 1
Footer.TextColor3 = UI_THEME.TextGray
Footer.TextTransparency = 0.5
Footer.Font = Enum.Font.Code
Footer.TextSize = 10
Footer.TextXAlignment = Enum.TextXAlignment.Right

-- Side Title
local SideTitle = Instance.new("TextLabel", Sidebar)
SideTitle.Size = UDim2.new(1, 0, 0, 40)
SideTitle.BackgroundTransparency = 1
SideTitle.Text = "SERAPHIN"
SideTitle.TextColor3 = UI_THEME.Accent
SideTitle.Font = Enum.Font.GothamBlack
SideTitle.TextSize = 14

-- Drag Logic (Agar UI bisa digeser)
local function EnableDrag(frame)
    local dragToggle, dragStart, startPos, dragInput
    frame.InputBegan:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
            dragToggle = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragToggle = false end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            dragInput = input
        end
    end)
    Services.UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragToggle then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end
EnableDrag(MainFrame)

-- ====================================================
-- [TABS SYSTEM]
-- ====================================================
local TabsContainer = Instance.new("Frame", Sidebar)
TabsContainer.Size = UDim2.new(1, 0, 1, -50)
TabsContainer.Position = UDim2.new(0, 0, 0, 50)
TabsContainer.BackgroundTransparency = 1

local Pages = {}

local function CreateTabBtn(text, order)
    local Btn = Instance.new("TextButton", TabsContainer)
    Btn.Size = UDim2.new(0.8, 0, 0, 30)
    Btn.Position = UDim2.new(0.1, 0, 0, (order * 38))
    Btn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Btn.Text = text
    Btn.Font = UI_THEME.Font
    Btn.TextColor3 = UI_THEME.TextGray
    Btn.TextSize = 11
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
    return Btn
end

local BtnTabMain = CreateTabBtn("MAIN", 0)
local BtnTabMisc = CreateTabBtn("MISC", 1)
local BtnHide    = CreateTabBtn("HIDE UI", 4)
BtnHide.BackgroundColor3 = Color3.fromRGB(40, 10, 10)
BtnHide.TextColor3 = Color3.fromRGB(255, 100, 100)

-- Page Main
local PageMain = Instance.new("ScrollingFrame", Content)
PageMain.Size = UDim2.new(1, 0, 1, 0)
PageMain.BackgroundTransparency = 1
PageMain.ScrollBarThickness = 2
Pages["Main"] = PageMain

local GridMain = Instance.new("UIGridLayout", PageMain)
GridMain.CellSize = UDim2.new(0, 135, 0, 32)
GridMain.CellPadding = UDim2.new(0, 8, 0, 8)

-- Page Misc
local PageMisc = Instance.new("ScrollingFrame", Content)
PageMisc.Size = UDim2.new(1, 0, 1, 0)
PageMisc.BackgroundTransparency = 1
PageMisc.ScrollBarThickness = 2
PageMisc.Visible = false
Pages["Misc"] = PageMisc

local ListMisc = Instance.new("UIListLayout", PageMisc)
ListMisc.Padding = UDim.new(0, 8)
ListMisc.SortOrder = Enum.SortOrder.LayoutOrder

-- Switch Logic
local function SwitchTab(name, activeBtn)
    for _, p in pairs(Pages) do p.Visible = false end
    Pages[name].Visible = true
    BtnTabMain.TextColor3 = UI_THEME.TextGray
    BtnTabMisc.TextColor3 = UI_THEME.TextGray
    BtnTabMain.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    BtnTabMisc.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    activeBtn.TextColor3 = UI_THEME.Accent
    activeBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
end

BtnTabMain.MouseButton1Click:Connect(function() SwitchTab("Main", BtnTabMain) end)
BtnTabMisc.MouseButton1Click:Connect(function() SwitchTab("Misc", BtnTabMisc) end)
SwitchTab("Main", BtnTabMain)

-- Hide UI Logic
local isHidden = false
BtnHide.MouseButton1Click:Connect(function()
    isHidden = not isHidden
    if isHidden then
        MainFrame:TweenSize(UDim2.new(0, 100, 0, 50), "Out", "Quad", 0.3)
        Content.Visible = false
        Footer.Visible = false
        SideTitle.Text = "OPEN"
    else
        MainFrame:TweenSize(UDim2.new(0, 420, 0, 270), "Out", "Back", 0.3)
        task.wait(0.25)
        Content.Visible = true
        Footer.Visible = true
        SideTitle.Text = "SERAPHIN"
    end
end)

-- ====================================================
-- [CORE BUTTON MAKER & VISUALS]
-- ====================================================

local function MakeBtn(parent, text)
    local b = Instance.new("TextButton", parent)
    b.Text = text
    b.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    b.TextColor3 = UI_THEME.TextWhite
    b.Font = UI_THEME.BtnFont
    b.TextSize = 10
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 4)
    local s = Instance.new("UIStroke", b)
    s.Color = UI_THEME.Accent
    s.Transparency = 0.8
    return b
end

local function ToggleVisual(btn, on)
    if on then
        Services.TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = UI_THEME.Accent, TextColor3 = Color3.new(0,0,0)}):Play()
        btn.UIStroke.Transparency = 1
    else
        Services.TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(25, 25, 25), TextColor3 = UI_THEME.TextWhite}):Play()
        btn.UIStroke.Transparency = 0.8
    end
end

-- Variables Global
local States = {
    AutoEvent = false, AutoEquip = false, WoW = false,
    Freeze = false, Noclip = false, Boost = false,
    AntiStuck = false, StuckTimeout = 60
}
local Connections = {} 
local BodyV = nil
local LastFishTime = tick()
local LastFishCount = 0

-- UI Elements Declaration
local BtnEvent  = MakeBtn(PageMain, "Auto Event: OFF")
local BtnEquip  = MakeBtn(PageMain, "Auto Equip: OFF")
local BtnWow    = MakeBtn(PageMain, "Water Walk: OFF")
local BtnFreeze = MakeBtn(PageMain, "Freeze: OFF")
local BtnNoclip = MakeBtn(PageMain, "Noclip: OFF")
local BtnRender = MakeBtn(PageMain, "3D Render: ON")
local BtnBoost  = MakeBtn(PageMain, "üî• ULTIMATE BOOST")
local BtnFps    = MakeBtn(PageMain, "Unlock FPS")

-- SLIDER COMPONENT (Untuk Anti Stuck)
local function CreateSlider(parent, title, min, max, default, callback)
    local Container = Instance.new("Frame", parent)
    Container.Size = UDim2.new(0.95, 0, 0, 50)
    Container.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Container.BackgroundTransparency = 0.5
    Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 6)
    
    local Label = Instance.new("TextLabel", Container)
    Label.Size = UDim2.new(1, -10, 0, 20)
    Label.Position = UDim2.new(0, 10, 0, 0)
    Label.BackgroundTransparency = 1
    Label.Text = title .. ": " .. default .. "s"
    Label.TextColor3 = UI_THEME.TextWhite
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Font = Enum.Font.GothamBold
    Label.TextSize = 11
    
    local SliderBg = Instance.new("TextButton", Container)
    SliderBg.Text = ""
    SliderBg.Size = UDim2.new(1, -20, 0, 6)
    SliderBg.Position = UDim2.new(0, 10, 0, 30)
    SliderBg.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    SliderBg.AutoButtonColor = false
    Instance.new("UICorner", SliderBg).CornerRadius = UDim.new(0, 3)
    
    local Fill = Instance.new("Frame", SliderBg)
    Fill.Size = UDim2.new(0, 0, 1, 0)
    Fill.BackgroundColor3 = UI_THEME.Accent
    Instance.new("UICorner", Fill).CornerRadius = UDim.new(0, 3)
    
    local function Update(input)
        local SizeX = math.clamp((input.Position.X - SliderBg.AbsolutePosition.X) / SliderBg.AbsoluteSize.X, 0, 1)
        Fill.Size = UDim2.new(SizeX, 0, 1, 0)
        local Value = math.floor((min + ((max - min) * SizeX)) * 10) / 10
        Label.Text = title .. ": " .. Value .. "s"
        callback(Value)
    end
    
    local Dragging = false
    SliderBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            Update(input)
        end
    end)
    
    Services.UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then Dragging = false end
    end)
    
    Services.UserInputService.InputChanged:Connect(function(input)
        if Dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then Update(input) end
    end)
    
    local startPercent = (default - min) / (max - min)
    Fill.Size = UDim2.new(startPercent, 0, 1, 0)
end

-- MISC PAGE SETUP (Stuck & Save)
local StuckFrame = Instance.new("Frame", PageMisc)
StuckFrame.Size = UDim2.new(0.95, 0, 0, 85)
StuckFrame.BackgroundColor3 = Color3.fromRGB(0,0,0) 
StuckFrame.BackgroundTransparency = 0.6
Instance.new("UICorner", StuckFrame).CornerRadius = UDim.new(0, 6)
local SStroke = Instance.new("UIStroke", StuckFrame)
SStroke.Color = UI_THEME.Accent
SStroke.Transparency = 0.7

local BtnAntiStuck = MakeBtn(StuckFrame, "Enable Anti-Stuck")
BtnAntiStuck.Size = UDim2.new(1, -10, 0, 25)
BtnAntiStuck.Position = UDim2.new(0, 5, 0, 5)

CreateSlider(StuckFrame, "Timeout", 0.1, 60, 60, function(val)
    States.StuckTimeout = val
end)

StuckFrame.DescendantsAdded:Connect(function(desc)
    if desc:IsA("Frame") and desc.Size.Y.Offset == 50 then
        desc.Position = UDim2.new(0, 5, 0, 35) -- Reposition Slider
    end
end)

local BtnSave   = MakeBtn(PageMisc, "Save Position")
BtnSave.Size = UDim2.new(0.95, 0, 0, 30)
local BtnLoad   = MakeBtn(PageMisc, "Load Position")
BtnLoad.Size = UDim2.new(0.95, 0, 0, 30)
local BtnRejoin = MakeBtn(PageMisc, "Rejoin Server")
BtnRejoin.Size = UDim2.new(0.95, 0, 0, 30)

-- ====================================================
-- [ULTIMATE BOOSTER LOGIC]
-- ====================================================
BtnBoost.MouseButton1Click:Connect(function()
    BtnBoost.Text = "OPTIMIZING..."
    
    -- 1. Matikan Lighting Berat
    Services.Lighting.GlobalShadows = false
    Services.Lighting.Brightness = 0
    Services.Lighting.FogEnd = 9e9
    
    pcall(function()
        settings().Rendering.QualityLevel = "Level01"
        
        -- 2. Hapus Efek Post-Processing (Bloom, Blur, dll)
        for _, v in pairs(Services.Lighting:GetChildren()) do
            if v:IsA("PostEffect") or v:IsA("Sky") or v:IsA("Atmosphere") then
                v:Destroy()
            end
        end
        
        -- 3. Hapus Air Terrain
        if Services.Workspace:FindFirstChildOfClass("Terrain") then
            Services.Workspace.Terrain.WaterWaveSize = 0
            Services.Workspace.Terrain.WaterReflectance = 0
            Services.Workspace.Terrain.CastShadows = false
        end

        -- 4. Deep Clean Workspace
        for _, v in pairs(Services.Workspace:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CastShadow = false
                v.Material = Enum.Material.SmoothPlastic
                v.Reflectance = 0
                if v.Transparency < 1 then v.Transparency = 0 end 
            elseif v:IsA("MeshPart") then
                v.TextureID = "" -- Hapus tekstur mesh
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Beam") or v:IsA("Fire") or v:IsA("Explosion") then
                v:Destroy() -- Hapus partikel
            elseif v:IsA("Shirt") or v:IsA("Pants") or v:IsA("Accessory") then
                -- Hapus baju player lain untuk hemat CPU
                if v.Parent ~= Player.Character then v:Destroy() end
            end
        end
    end)
    
    -- 5. Garbage Collection
    task.wait(0.2)
    local startMem = gcinfo()
    for i = 1, 3 do collectgarbage("collect") end
    local freed = math.floor(startMem - gcinfo())

    BtnBoost.Text = "üî• ULTRA BOOSTED!"
    Notify("BOOSTER", "RAM Freed: " .. freed .. " KB\nFPS Optimized!")
    ToggleVisual(BtnBoost, true)
end)

-- ====================================================
-- [EVENT-BASED LOGIC]
-- ====================================================

-- AUTO EVENT
local function CheckEventModel(child)
    if not States.AutoEvent or not HRP then return end
    if child:IsA("Model") or child:IsA("BasePart") then
        Notify("EVENT DETECTED", "Teleporting instantly...")
        task.wait(0.1)
        local target = child:GetPivot().Position
        if (HRP.Position - target).Magnitude > 15 then
            HRP.CFrame = CFrame.new(target + Vector3.new(0, 5, 0))
        end
    end
end

BtnEvent.MouseButton1Click:Connect(function()
    States.AutoEvent = not States.AutoEvent
    BtnEvent.Text = "Auto Event: " .. (States.AutoEvent and "ON" or "OFF")
    ToggleVisual(BtnEvent, States.AutoEvent)
    
    if States.AutoEvent then
        local Props = Services.Workspace:FindFirstChild("Props")
        if Props then
            for _, v in pairs(Props:GetChildren()) do CheckEventModel(v) end
            Connections["AutoEvent"] = Props.ChildAdded:Connect(CheckEventModel)
        end
    else
        if Connections["AutoEvent"] then Connections["AutoEvent"]:Disconnect() end
    end
end)

-- AUTO EQUIP
local function ForceEquipRod()
    pcall(function()
        local pkg = Services.ReplicatedStorage:FindFirstChild("Packages")
        if pkg and pkg:FindFirstChild("_Index") then
            local r = pkg._Index:FindFirstChild("sleitnick_net@0.2.0")
            if r then r.net["RE/EquipToolFromHotbar"]:FireServer(1) end
        end
    end)
end

local function OnCharacterChildRemoved(child)
    if States.AutoEquip and child:IsA("Tool") then
        ForceEquipRod()
    end
end

BtnEquip.MouseButton1Click:Connect(function()
    States.AutoEquip = not States.AutoEquip
    BtnEquip.Text = "Auto Equip: " .. (States.AutoEquip and "ON" or "OFF")
    ToggleVisual(BtnEquip, States.AutoEquip)
    
    if States.AutoEquip then
        ForceEquipRod()
        Connections["AutoEquip"] = Char.ChildRemoved:Connect(OnCharacterChildRemoved)
    else
        if Connections["AutoEquip"] then Connections["AutoEquip"]:Disconnect() end
    end
end)

Player.CharacterAdded:Connect(function(newChar)
    if States.AutoEquip then
        task.wait(1)
        ForceEquipRod()
        if Connections["AutoEquip"] then Connections["AutoEquip"]:Disconnect() end
        Connections["AutoEquip"] = newChar.ChildRemoved:Connect(OnCharacterChildRemoved)
    end
end)

-- MOVEMENT & UTILS
BtnWow.MouseButton1Click:Connect(function()
    States.WoW = not States.WoW
    BtnWow.Text = "Water Walk: " .. (States.WoW and "ON" or "OFF")
    ToggleVisual(BtnWow, States.WoW)
    
    if States.WoW then
        Connections["WoW"] = Services.RunService.RenderStepped:Connect(function()
            if not HRP then return end
            if not BodyV then
                BodyV = Instance.new("BodyVelocity", HRP)
                BodyV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            end
            local md = Hum.MoveDirection
            if md.Magnitude > 0 then
                BodyV.Velocity = Vector3.new(md.X * 16, 0, md.Z * 16)
            else
                BodyV.Velocity = Vector3.zero
            end
        end)
    else
        if Connections["WoW"] then Connections["WoW"]:Disconnect() end
        if BodyV then BodyV:Destroy() BodyV = nil end
    end
end)

BtnFreeze.MouseButton1Click:Connect(function()
    States.Freeze = not States.Freeze
    if HRP then HRP.Anchored = States.Freeze end
    BtnFreeze.Text = "Freeze: " .. (States.Freeze and "ON" or "OFF")
    ToggleVisual(BtnFreeze, States.Freeze)
end)

BtnNoclip.MouseButton1Click:Connect(function()
    States.Noclip = not States.Noclip
    BtnNoclip.Text = "Noclip: " .. (States.Noclip and "ON" or "OFF")
    ToggleVisual(BtnNoclip, States.Noclip)
    
    if States.Noclip then
        Connections["Noclip"] = Services.RunService.Stepped:Connect(function()
            if Char then
                for _, v in pairs(Char:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
    else
        if Connections["Noclip"] then Connections["Noclip"]:Disconnect() end
    end
end)

BtnRender.MouseButton1Click:Connect(function()
    Services.RunService:Set3dRenderingEnabled(not Services.RunService:Is3dRenderingEnabled())
    BtnRender.Text = "3D Render: " .. (Services.RunService:Is3dRenderingEnabled() and "ON" or "OFF")
    ToggleVisual(BtnRender, not Services.RunService:Is3dRenderingEnabled())
end)

BtnFps.MouseButton1Click:Connect(function()
    if setfpscap then setfpscap(9999) end
    BtnFps.Text = "FPS Unlocked"
    ToggleVisual(BtnFps, true)
end)

local SavedPos = nil
BtnSave.MouseButton1Click:Connect(function()
    if HRP then SavedPos = HRP.CFrame Notify("POS", "Position Saved!") end
end)
BtnLoad.MouseButton1Click:Connect(function()
    if HRP and SavedPos then HRP.CFrame = SavedPos end
end)
BtnRejoin.MouseButton1Click:Connect(function()
    Services.TeleportService:Teleport(game.PlaceId, Player)
end)

-- ANTI STUCK (Loop Wajib)
BtnAntiStuck.MouseButton1Click:Connect(function()
    States.AntiStuck = not States.AntiStuck
    BtnAntiStuck.Text = "Anti-Stuck: " .. (States.AntiStuck and "ACTIVE" or "OFF")
    ToggleVisual(BtnAntiStuck, States.AntiStuck)
    if States.AntiStuck then LastFishTime = tick() end
end)

task.spawn(function()
    while true do
        task.wait(1)
        if States.AntiStuck then
            pcall(function()
                local ls = Player:FindFirstChild("leaderstats")
                local cur = (ls and ls:FindFirstChild("Caught")) and ls.Caught.Value or 0
                
                if cur > LastFishCount then
                    LastFishCount = cur
                    LastFishTime = tick()
                elseif (tick() - LastFishTime) > States.StuckTimeout then
                    Notify("‚ö†Ô∏è STUCK", "Respawning... (Timeout)")
                    local oldPos = HRP.CFrame
                    if Hum then Hum.Health = 0 end
                    Player.CharacterAdded:Wait()
                    task.wait(1)
                    if Player.Character then Player.Character:SetPrimaryPartCFrame(oldPos) end
                    LastFishTime = tick()
                end
            end)
        else
            LastFishTime = tick()
        end
    end
end)

